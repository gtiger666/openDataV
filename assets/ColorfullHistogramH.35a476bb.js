import{W as z}from"./echarts.b68702ec.js";import{a as B}from"./@vueuse.f12362bf.js";import{h as H}from"./index.59cf4f9c.js";import{_ as L,c as C,u as E}from"./index.8c99d488.js";import{p as I,r as f,q as k,w as A,o as D,y as M,B as a,H as b,E as T,x as R}from"./@vue.93899e90.js";import"./zrender.aa8f9b3b.js";import"./tslib.34a40861.js";import"./axios.19d3e859.js";import"./vue-router.62208e1c.js";import"./pinia.7738838c.js";import"./vue-demi.b3a9cad9.js";import"./mitt.550594b0.js";import"./element-plus.da7f9641.js";import"./lodash.1a3e162a.js";import"./nprogress.5f640c6a.js";import"./async-validator.5d25c98b.js";import"./@popperjs.a8a4a6a0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./lodash-es.ef547d44.js";const N={class:"colorfullHistogramH subbkg"},O={class:"colorfullHistogramH_content"},W={class:T(["colorfullHistogramH_content_chart subbkg"])},P={class:"all_box"},q={class:"chart_box"},U={class:"dushu_box"},G={class:"dushu_boxS"},J={class:"dushu_text"},K={class:"dushu_v"},Q=I({props:{element:null,propValue:null},setup(m){const i=m,y=f(null),u=f(null);let o=null,_=[],l=0;const g=C(),h=f(0),F=e=>{const t=e;if(i.propValue.datatag&&t.TagName===i.propValue.datatag){const s=Number(t.TagValue);l=s,h.value=s,d(l)}};k(()=>{v()}),E("actual",F);function v(){H.get({url:i.propValue.history}).then(e=>{_=e.data||[],_.forEach(t=>{l=Number(t.TagValue)}),d(l)}).catch(e=>{g.isEditMode&&(l=Math.round(Math.random()*100))}).finally(()=>{h.value=l,d(l)})}B(y,e=>{const t=e[0],{width:s,height:r}=t.contentRect;o==null||o.resize({width:s,height:r})});function d(e){const t=i.propValue.total,s=i.propValue.normal,r=i.propValue.warning,w=i.propValue.alarm;e>t&&(e=t),e<0&&(e=0);const j=u.value.getBoundingClientRect().width,S=u.value.getBoundingClientRect().height;o=z(u.value,"");let V={grid:{left:20,top:0,right:30,bottom:18},yAxis:[{data:[""],axisLine:{show:!1,lineStyle:{color:"#FFFFFF"}},axisTick:{show:!1},axisLabel:{color:"#FFFFFF",fontSize:12,interval:0}},{type:"category",show:!0,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{interval:0,margin:10,color:"#fff",fontSize:"10"},data:[]}],xAxis:[{max:t,splitLine:{show:!1},axisTick:{show:!0},axisLine:{show:!1,lineStyle:{color:"#FFFFFF"}},splitNumber:3,axisLabel:{show:!0,textStyle:{color:"#FFFFFF"}}},{max:t,type:"value",splitLine:{show:!1},axisTick:{show:!0},axisLine:{show:!1,lineStyle:{color:"#FFFFFF"},length:5,inside:!0},axisLabel:{textStyle:{color:"#FFFFFF"}}}],series:[{type:"pictorialBar",itemStyle:{normal:{color:"#07314a"}},symbolRepeat:"fixed",symbolMargin:2,symbol:"rect",symbolClip:!0,symbolSize:[3,40],symbolPosition:"start",symbolOffset:[3,0],symbolBoundingData:t,data:[t],z:0,animationEasing:"elasticOut",yAxisIndex:0},{name:"\u6570\u91CF",type:"pictorialBar",symbol:"rect",itemStyle:{normal:{color:"#009BF1",function(x){var p=[];let c=x.gloabalData,n="";return 0<=c&&c<=s?(n="#009BF1",p.push(n)):s<c&&c<=r?(n="#E7A402",p.push(n)):r<c<=w&&(n="#E00100",p.push(n)),p[x.dataIndex]}}},symbolRepeat:!0,symbolSize:[3,38],symbolMargin:0,symbolPosition:"start",z:-20,data:[e],label:{normal:{show:!1,position:"top",verticalAlign:"top"}},yAxisIndex:0},{name:"",type:"bar",barWidth:40,itemStyle:{color:"rgba(0,0,0,0)",borderWidth:2,borderColor:"#10bffc",padding:0},label:{show:!1},z:-10,yAxisIndex:1,data:[t]}]};o.resize({width:j,height:S}),o.setOption(V)}return g.isEditMode&&A(()=>i.propValue,e=>{o&&d(l)}),D(()=>{o&&(o.clear(),o.dispose())}),(e,t)=>(R(),M("div",N,[a("div",O,[a("div",W,[a("div",P,[a("div",q,[a("div",{class:"tip_id",ref:(s,r)=>{r.tipId=s,y.value=s},style:{width:"100%",height:"5%"}},null,512),a("div",{class:"chart_id",ref:(s,r)=>{r.chartId=s,u.value=s},style:{width:"100%",height:"95%"}},null,512)]),a("div",U,[a("div",G,[a("div",J,b(m.propValue.name)+" "+b(m.propValue.unit),1),a("div",K,b(h.value),1)])])])])])]))}});var ft=L(Q,[["__scopeId","data-v-35396c35"]]);export{ft as default};
