var g=(b,u,c)=>new Promise((m,t)=>{var p=a=>{try{r(c.next(a))}catch(l){t(l)}},d=a=>{try{r(c.throw(a))}catch(l){t(l)}},r=a=>a.done?m(a.value):Promise.resolve(a.value).then(p,d);r((c=c.apply(b,u)).next())});import{C as I}from"./ComponentWrapper.31cf38e1.js";import{g as B,a as C}from"./index.1127d831.js";import{d as F,u as z}from"./vue-router.62208e1c.js";import{_ as A,h as w,i as H}from"./index.8c99d488.js";import{u as M}from"./wsdata.3b3b54a2.js";import{c as S}from"./lodash-es.ef547d44.js";import{p as q,r as k,q as N,_ as x,o as O,x as h,y as D,B as R,F as U,a6 as J,M as L,I as E,u as W}from"./@vue.93899e90.js";import"./index.59cf4f9c.js";import"./axios.19d3e859.js";import"./@vueuse.f12362bf.js";import"./pinia.7738838c.js";import"./vue-demi.b3a9cad9.js";import"./mitt.550594b0.js";import"./element-plus.da7f9641.js";import"./lodash.1a3e162a.js";import"./nprogress.5f640c6a.js";import"./async-validator.5d25c98b.js";import"./@popperjs.a8a4a6a0.js";import"./resize-observer-polyfill.8deb1e21.js";const P=q({setup(b){const u=[],c=M(),m=k([]),t=k({}),p=F(),d=z(),r=()=>{const e=parseInt(t.value.width),o=parseInt(t.value.height),s=document.documentElement.clientWidth/e,n=document.documentElement.clientHeight/o,i=Math.min(s,n),_=document.querySelector(".screen");_&&(_.style.transform=`scale(${i}) translate(-50%)`)},a=e=>g(this,null,function*(){console.log("\u52A0\u8F7D\u901A\u7528\u7EC4\u4EF6");try{const o=yield B(e);j(o)}catch(o){d.push({name:"Error"})}}),l=()=>g(this,null,function*(){try{const e=yield C();j(e)}catch(e){d.push({name:"Error"})}}),j=e=>{if(e.canvasStyle){t.value=S(e.canvasStyle);const{width:o,height:s}=w(t.value),{backgroundImage:n,backgroundSize:i}=w(t.value);v.backgroundImage=n,v.backgroundSize=i,f.width=o,f.height=s}e.canvasData&&(m.value=S(e.canvasData)),t.value.alertWs&&u.push(y("alert",t.value.alertWs)),t.value.dataWs&&u.push(y("actual",t.value.dataWs)),r()};N(()=>g(this,null,function*(){p.name==="Home"?yield l():yield a(p.params.index)}));const f=x({width:"0px",height:"0px"}),v=x({backgroundImage:'url("/images/bg.jpg")',backgroundSize:"cover"}),y=(e,o)=>{const s=new WebSocket(o);return s.onopen=()=>{console.log("websocket\u8FDE\u63A5\u6210\u529F")},s.onclose=()=>{console.log("websocket\u8FDE\u63A5\u88AB\u5173\u95ED")},s.onmessage=n=>{const i=JSON.parse(n.data);H.emit(e,i),c.addData(e,i)},s};return O(()=>{u.forEach(e=>{console.log("\u5173\u95EDwebsocket"),e.close()})}),window.onresize=()=>{r()},(e,o)=>(h(),D("div",{class:"bg",style:E(W(v))},[R("div",{class:"screen",style:E(W(f))},[(h(!0),D(U,null,J(m.value,(s,n)=>(h(),L(I,{key:n,config:s},null,8,["config"]))),128))],4)],4))}});var me=A(P,[["__scopeId","data-v-594eb55e"]]);export{me as default};
