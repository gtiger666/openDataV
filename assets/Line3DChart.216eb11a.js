var j=(d,o,r)=>new Promise((e,p)=>{var c=s=>{try{i(r.next(s))}catch(m){p(m)}},l=s=>{try{i(r.throw(s))}catch(m){p(m)}},i=s=>s.done?e(s.value):Promise.resolve(s.value).then(c,l);i((r=r.apply(d,o)).next())});import{V as h,W as y}from"./echarts.b68702ec.js";import"./echarts-gl.e12561de.js";import{h as b}from"./index.59cf4f9c.js";import{h as v}from"./moment.08a7f518.js";import{t as x}from"./mydark.8efe4250.js";import{a as g}from"./@vueuse.f12362bf.js";import{p as D,r as V,q as Y,o as w,y as M,x as k}from"./@vue.93899e90.js";import"./zrender.aa8f9b3b.js";import"./tslib.34a40861.js";import"./claygl.fc59f3d1.js";import"./axios.19d3e859.js";import"./index.8c99d488.js";import"./vue-router.62208e1c.js";import"./pinia.7738838c.js";import"./vue-demi.b3a9cad9.js";import"./mitt.550594b0.js";import"./element-plus.da7f9641.js";import"./lodash.1a3e162a.js";import"./nprogress.5f640c6a.js";import"./async-validator.5d25c98b.js";import"./@popperjs.a8a4a6a0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./lodash-es.ef547d44.js";const Z=D({props:{propValue:null,element:null},setup(d){const o=d;h("mydark",x);const r=V(null);let e=null,p=[],c=[],l=null;g(r,t=>{const f=t[0],{width:n,height:a}=f.contentRect;e==null||e.resize({width:n,height:a})});const i=()=>({visualMap:{show:!1,min:Number(o.propValue.min),max:Number(o.propValue.max),inRange:{color:["#003dff","#00fffc","#46ff00","#ffdf00","#ff9e00","#ff0028"]}},xAxis3D:{type:"value"},yAxis3D:{type:"category",data:c},zAxis3D:{type:"value",max:Number(o.propValue.max),min:Number(o.propValue.min)},grid3D:{},series:[{type:"surface",data:p,wireframe:{show:!1},shading:"color"}]}),s=()=>j(this,null,function*(){const t=v("2022-01-05 00:00:00"),f=t.format("YYYY-MM-DD HH:mm:ss"),n=t.subtract(o.propValue.interval,o.propValue.unit);try{const a=yield b.get({url:o.propValue.url,params:{start:n.format("YYYY-MM-DD HH:mm:ss"),end:f}});for(let u in a)c.push(u[0]),p.push([u[1],u[0],u[2]])}catch(a){console.log(a)}m()}),m=()=>{if(e){const t=i();console.log(t),e.setOption(t)}};return Y(()=>j(this,null,function*(){e=y(r.value);const t=i();e.setOption(t),yield s(),l=setInterval(()=>{s()},10*60*1e3)})),w(()=>{l&&clearInterval(l),e&&(e.clear(),e.dispose())}),(t,f)=>(k(),M("div",{ref:(n,a)=>{a.chartEl=n,r.value=n}},null,512))}});export{Z as default};
