import{V as j,W as w}from"./echarts.b68702ec.js";import{a as V}from"./@vueuse.f12362bf.js";import{h as x}from"./index.59cf4f9c.js";import{l as S}from"./lodash.1a3e162a.js";import{_ as B,c as E,u as C}from"./index.8c99d488.js";import{t as k}from"./mydark.8efe4250.js";import{p as z,r as f,q as D,w as M,o as N,y as O,B as i,H as p,x as L}from"./@vue.93899e90.js";import"./zrender.aa8f9b3b.js";import"./tslib.34a40861.js";import"./axios.19d3e859.js";import"./vue-router.62208e1c.js";import"./nprogress.5f640c6a.js";import"./pinia.7738838c.js";import"./vue-demi.b3a9cad9.js";import"./mitt.550594b0.js";import"./element-plus.da7f9641.js";import"./async-validator.5d25c98b.js";import"./@popperjs.a8a4a6a0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./lodash-es.ef547d44.js";const P={class:"meterPic"},T={class:"meterPic_right"},$={class:"fontStyle1"},R={class:"fontStyle2"},F=z({props:{element:null,propValue:null},setup(l){const s=l;j("mydark",k);const n=f(null),m=f(null);let e=null,d=[],c=0;const h=E(),v=t=>{const a=t;s.propValue.datatag&&a.TagName===s.propValue.datatag&&(c=Number(a.TagValue),b())};D(()=>{g()}),C("actual",v);function g(){x.get({url:s.propValue.history}).then(t=>{d=t.data||[],d.forEach(a=>{c=Number(a.TagValue)})}).catch(()=>{const t=s.propValue.maxValue;c=Math.round(Math.random()*t)}).finally(()=>{y()})}V(n,t=>{const a=t[0],{width:o,height:r}=a.contentRect;e==null||e.resize({width:o,height:r})});function u(){const t=s.propValue.name,a=s.propValue.unit,o=s.propValue.value;return{tooltip:{formatter:`${t}{a} {b} : ${o}${a}`},series:[{name:"\u5C0F\u5706\u5F62",type:"pie",hoverAnimation:!1,legendHoverLink:!1,tooltip:{show:!1},center:["100%","100%"],radius:["0%"],z:20,label:{normal:{show:!1,position:"center"},emphasis:{show:!1}},labelLine:{normal:{show:!1}},animation:!1,data:[{value:0,name:"1",itemStyle:{normal:{color:"red"}}},{value:100,name:"2",itemStyle:{normal:{color:"#17acce"}}}]},{name:"",type:"gauge",min:0,detail:{formatter:`${o}${a}`},radius:"100%",axisLine:{lineStyle:{width:4,color:[[.4,"#0DBC79"],[.8,"#E7A402"],[1,"#E00100"]]},show:!0},axisTick:{show:!0,length:6,splitNumber:3},axisLabel:{fontSize:"12px",color:"#fff",shadowColor:"#fff",shadowBlur:10,show:!1,distance:-26,splitNumber:2,formatter:function(_){return _.toFixed(0)}},splitLine:{length:10,lineStyle:{width:1,color:"#fff",shadowColor:"#fff",shadowBlur:10}},pointer:{show:!0,length:"68%",radius:"50%",width:"4"},itemStyle:{color:"#17acce"},data:[{value:o,name:""}]}]}}const b=S.exports.debounce(()=>{const t=u();t.series[1].data[0]=c,e&&e.setOption({series:t.series})},300),y=()=>{const t=n.value.getBoundingClientRect().width,a=n.value.getBoundingClientRect().height;e=w(m.value,"mydark"),e.clear(),e.resize({width:t,height:a}),e.setOption(u())};return h.isEditMode&&M(()=>s.propValue,()=>{e&&(e.clear(),e.setOption(u()))},{deep:!0}),N(()=>{e&&(e.clear(),e.dispose())}),(t,a)=>(L(),O("div",P,[i("div",{class:"meterPic_left",ref:(o,r)=>{r.mainEls=o,n.value=o}},[i("div",{class:"histogramS_content_echarts",ref:(o,r)=>{r.chartEls=o,m.value=o},style:{width:"100%",height:"9vh"}},null,512)],512),i("div",T,[i("p",$,p(l.propValue.name),1),i("p",R,p(l.propValue.value)+" "+p(l.propValue.unit),1)])]))}});var le=B(F,[["__scopeId","data-v-38b6cbe1"]]);export{le as default};
