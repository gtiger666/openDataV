import{V as b,W as k}from"./echarts.b68702ec.js";import{a as A}from"./@vueuse.f12362bf.js";import{h as I}from"./index.59cf4f9c.js";import{c as H}from"./index.8c99d488.js";import{t as B}from"./mydark.8efe4250.js";import{p as C,r as P,q as _,w,o as E,y as z,x as V}from"./@vue.93899e90.js";import"./zrender.aa8f9b3b.js";import"./tslib.34a40861.js";import"./axios.19d3e859.js";import"./vue-router.62208e1c.js";import"./pinia.7738838c.js";import"./vue-demi.b3a9cad9.js";import"./mitt.550594b0.js";import"./element-plus.da7f9641.js";import"./lodash.1a3e162a.js";import"./nprogress.5f640c6a.js";import"./async-validator.5d25c98b.js";import"./@popperjs.a8a4a6a0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./lodash-es.ef547d44.js";const ot=C({props:{element:null,propValue:null},setup(v){const s=v;b("mydark",B);const y=H(),d=P(null);let n=null,i=0,m,f,r=0;_(()=>{j(),clearInterval(m),D(),m=setInterval(M,s.propValue.interval),setTimeout(S,1e3)});function j(){I.get({url:s.propValue.history}).then(e=>{i=e.data||0}).catch(e=>{console.log(e),i=Math.round(Math.random()*100)}).finally(()=>{M()})}A(d,e=>{const l=e[0],{width:a,height:o}=l.contentRect;n==null||n.resize({width:a,height:o})});const x=(e,l,a,o)=>{let t=e+a*Math.cos(o*Math.PI/180),c=l+a*Math.sin(o*Math.PI/180);return{x:t,y:c}},p=()=>{let e=s.propValue.fontSize,l=s.propValue.lineLength;return{title:{text:"{a|"+i+"%}",x:"center",y:"center",textStyle:{rich:{a:{fontSize:e,color:"#29EEF3"},c:{fontSize:20,color:"#29EEF3"}}}},series:[{name:"ring5",type:"custom",coordinateSystem:"none",renderItem:function(o,t){return{type:"arc",shape:{cx:t.getWidth()/2,cy:t.getHeight()/2,r:Math.min(t.getWidth(),t.getHeight())/2*.6,startAngle:(0+r)*Math.PI/180,endAngle:(90+r)*Math.PI/180},style:{stroke:"#0CD3DB",fill:"transparent",lineWidth:1.5},silent:!0}},data:[0]},{name:"ring5",type:"custom",coordinateSystem:"none",renderItem:function(o,t){return{type:"arc",shape:{cx:t.getWidth()/2,cy:t.getHeight()/2,r:Math.min(t.getWidth(),t.getHeight())/2*.6,startAngle:(180+r)*Math.PI/180,endAngle:(270+r)*Math.PI/180},style:{stroke:"#0CD3DB",fill:"transparent",lineWidth:1.5},silent:!0}},data:[0]},{name:"ring5",type:"custom",coordinateSystem:"none",renderItem:function(o,t){return{type:"arc",shape:{cx:t.getWidth()/2,cy:t.getHeight()/2,r:Math.min(t.getWidth(),t.getHeight())/2*.65,startAngle:(270+-r)*Math.PI/180,endAngle:(40+-r)*Math.PI/180},style:{stroke:"#0CD3DB",fill:"transparent",lineWidth:1.5},silent:!0}},data:[0]},{name:"ring5",type:"custom",coordinateSystem:"none",renderItem:function(o,t){return{type:"arc",shape:{cx:t.getWidth()/2,cy:t.getHeight()/2,r:Math.min(t.getWidth(),t.getHeight())/2*.65,startAngle:(90+-r)*Math.PI/180,endAngle:(220+-r)*Math.PI/180},style:{stroke:"#0CD3DB",fill:"transparent",lineWidth:1.5},silent:!0}},data:[0]},{name:"ring5",type:"custom",coordinateSystem:"none",renderItem:function(o,t){let c=t.getWidth()/2,u=t.getHeight()/2,g=Math.min(t.getWidth(),t.getHeight())/2*.65,h=x(c,u,g,90+-r);return{type:"circle",shape:{cx:h.x,cy:h.y,r:4},style:{stroke:"#0CD3DB",fill:"#0CD3DB"},silent:!0}},data:[0]},{name:"ring5",type:"custom",coordinateSystem:"none",renderItem:function(o,t){let c=t.getWidth()/2,u=t.getHeight()/2,g=Math.min(t.getWidth(),t.getHeight())/2*.65,h=x(c,u,g,270+-r);return{type:"circle",shape:{cx:h.x,cy:h.y,r:4},style:{stroke:"#0CD3DB",fill:"#0CD3DB"},silent:!0}},data:[0]},{name:"invent",type:"pie",radius:["58%","45%"],silent:!0,clockwise:!0,startAngle:90,z:0,zlevel:0,label:{normal:{position:"center"}},data:[{value:i,name:"",itemStyle:{normal:{color:{colorStops:[{offset:0,color:"#4FADFD"},{offset:1,color:"#28E8FA"}]}}}},{value:100-i,name:"",label:{normal:{show:!1}},itemStyle:{normal:{color:"#173164"}}}]},{name:"",type:"gauge",radius:"58%",center:["50%","50%"],startAngle:0,endAngle:359.9,splitNumber:8,hoverAnimation:!0,axisTick:{show:!1},splitLine:{length:l,lineStyle:{width:5,color:"#061740"}},axisLabel:{show:!1},pointer:{show:!1},axisLine:{lineStyle:{opacity:0}},detail:{show:!1},data:[{value:0,name:""}]}]}},M=()=>{I.get({url:s.propValue.history}).then(e=>{i=e.data||0}).catch(e=>{y.isEditMode&&(i=Math.round(Math.random()*100))}).finally(()=>{let e=i.toFixed(2).split(".")[0],l=i.toFixed(2).split(".")[1];const a="{a|"+e+"}{a|."+l+"%}";n&&n.setOption({title:{text:a}})})},D=()=>{n=k(d.value,"mydark"),n.clear(),n.setOption(p())};y.isEditMode&&w(()=>s.propValue,(e,l)=>{console.log(e),n&&(n.clear(),n.setOption(p()))},{deep:!0});const W=()=>{const e=p();n&&(r=r+3,n.setOption(e,!0))},S=()=>{f=setInterval(W,100)};return E(()=>{clearInterval(m),clearInterval(f),n&&(n.clear(),n.dispose())}),(e,l)=>(V(),z("div",{ref:(a,o)=>{o.chartEl=a,d.value=a}},null,512))}});export{ot as default};
