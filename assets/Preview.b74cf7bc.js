import{C as B}from"./ComponentWrapper.31cf38e1.js";import{_ as N,c as C,h as f,i as u,K as O}from"./index.8c99d488.js";import{b as v}from"./@vueuse.f12362bf.js";import{p as F,_ as S,q as J,o as z,x as m,y,B as A,F as I,a6 as M,M as q,u as p,I as _}from"./@vue.93899e90.js";import"./vue-router.62208e1c.js";import"./pinia.7738838c.js";import"./vue-demi.b3a9cad9.js";import"./mitt.550594b0.js";import"./element-plus.da7f9641.js";import"./lodash.1a3e162a.js";import"./nprogress.5f640c6a.js";import"./async-validator.5d25c98b.js";import"./@popperjs.a8a4a6a0.js";import"./resize-observer-polyfill.8deb1e21.js";import"./lodash-es.ef547d44.js";const H=F({setup(P){const r=[],i=C(),h=v("canvasData",JSON.stringify(i.componentData),window.localStorage),b=v("canvasStyle",JSON.stringify(i.canvasStyleData),window.localStorage);let t=i.canvasStyleData;const w=JSON.parse(h.value);try{t=JSON.parse(b.value)}catch(e){console.log((e==null?void 0:e.message)||e)}const{width:j,height:D}=f(t),{backgroundImage:E,backgroundSize:k}=f(t),W=S({width:j,height:D}),x=S({backgroundImage:E,backgroundSize:k});J(()=>{t.alertWs&&r.push(d("alert",t.alertWs)),t.dataWs&&r.push(d("actual",t.dataWs)),g()});const d=(e,n)=>{const s=new WebSocket(n);return s.onopen=()=>{console.log("websocket\u8FDE\u63A5\u6210\u529F")},s.onclose=()=>{console.log("websocket\u8FDE\u63A5\u88AB\u5173\u95ED")},s.onmessage=o=>{const a=JSON.parse(o.data);u.emit(e,a),O.forEach((c,l)=>{c.isRegExp?new RegExp(e).test(a.TagName)&&u.emit(l,a):l===a.TagName&&u.emit(l,a)})},s};z(()=>{r.forEach(e=>{console.log("\u5173\u95EDwebsocket"),e.close()})});const g=()=>{const e=t.width,n=t.height,s=document.documentElement.clientWidth/e,o=document.documentElement.clientHeight/n,a=Math.min(s,o),c=document.querySelector(".screen");c&&(c.style.transform=`scale(${a}) translate(-50%)`)};return window.onresize=()=>{g()},(e,n)=>(m(),y("div",{class:"bg",style:_(p(x))},[A("div",{class:"screen",style:_(p(W))},[(m(!0),y(I,null,M(p(w),(s,o)=>(m(),q(B,{key:o,config:s},null,8,["config"]))),128))],4)],4))}});var oe=N(H,[["__scopeId","data-v-5e57e82e"]]);export{oe as default};
